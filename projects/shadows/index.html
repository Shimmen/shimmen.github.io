<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>dynamic hardness shadow mapping – simon moos</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" href="../../favicon.ico">
		<link rel="stylesheet" href="../../css/project.css">
	</head>
	<body>

		<header>
			<h1><a href="/">Simon Moos</a></h1>
		</header>

		<section>

			<h1>
				Dynamic Hardness Shadow Mapping
				<small>2017-XX-XX – Simon Moos</small>
			</h1>

			<canvas id="canvas"></canvas>
			<button type="button" id="fullscreen-btn" class="remove-if-no-gl" onclick="goFullscreen()">Go Fullscreen</button>
			<div class="remove-if-no-gl">
				<!-- Settings ... -->
			</div>

			<script type="x-shader/x-vertex" id="main-vs">
				#version 300 es

				layout(location = 0) in vec3 a_position;
				layout(location = 1) in vec3 a_normal;

				layout(std140) uniform CameraUniforms {
					mat4 u_view_from_world;
					mat4 u_projection_from_view;
					mat4 u_view_from_projection;
				};

				uniform mat4 u_world_from_local;

				out vec3 v_normal;

				void main() {
					v_normal = mat3(u_world_from_local) * normalize(a_normal); // only perform uniform scaling!
					gl_Position = u_projection_from_view * u_view_from_world * u_world_from_local * vec4(a_position, 1.0);
				}
			</script>
			<script type="x-shader/x-fragment" id="main-fs">
				#version 300 es
				precision highp float;

				layout(std140) uniform LightUniforms {
					vec4 u_light_position;
					vec4 u_light_direction;
					mat4 u_light_from_world;
					mat4 u_projection_from_light;
					mat4 u_light_from_projection;
					float u_light_cutoff;
				};

				uniform vec3 u_color;

				in vec3 v_normal;

				layout(location = 0) out vec4 o_frag_color;

				void main() {

					vec3 N = normalize(v_normal);
					vec3 L = normalize(-u_light_direction.xyz);

					float LdotN = max(0.15, dot(L, N));

					o_frag_color = vec4(LdotN * u_color, 1);
				}
			</script>

			<script type="x-shader/x-vertex" id="shadow-gen-vs">
				#version 300 es

				layout(location = 0) in vec3 a_position;

				layout(std140) uniform LightUniforms {
					vec4 u_light_position;
					vec4 u_light_direction;
					mat4 u_light_from_world;
					mat4 u_projection_from_light;
					mat4 u_light_from_projection;
					float u_light_cutoff;
				};
				uniform mat4 u_world_from_local;

				void main() {
					gl_Position = u_projection_from_light * u_light_from_world * u_world_from_local * vec4(a_position, 1.0);
				}
			</script>
			<script type="x-shader/x-fragment" id="shadow-gen-fs">
				#version 300 es
				precision highp float;

				layout(location = 0) out vec4 o_frag_color;

				void main() {
					o_frag_color = vec4(gl_FragCoord.zzz, 1);
				}
			</script>

			<h2>About</h2>
			<p>TODO!</p>
			<p><a href="https://twitter.com/share" class="twitter-share-button" data-text="..." data-via="SimonMoos" data-lang="en" data-show-count="false">Tweet</a></p>
			<p>If you want to see and hear more from me, follow me on Twitter and GitHub:</p>
			<p>
				<a href="https://twitter.com/SimonMoos" class="twitter-follow-button" data-lang="en" data-show-count="false">Follow @SimonMoos</a>
				<iframe src="https://ghbtns.com/github-btn.html?user=Shimmen&type=follow&count=false" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
			</p>

		</section>

		<footer>
			<p>Simon Moos (c) 2017</p>
		</footer>

		<script src="../picogl.min.js" charset="utf-8"></script>
		<script src="../gl-matrix-min.js" charset="utf-8"></script>
		<script src="../webgl-obj-loader.js" charset="utf-8"></script>
		<script src="rendering.js" charset="utf-8"></script>
		<script src="../base.js" charset="utf-8"></script>

		<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-98613739-1', 'auto');
			ga('send', 'pageview');
		</script>
	</body>
</html>
